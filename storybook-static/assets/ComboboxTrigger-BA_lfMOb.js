import{d as T,b as E,o as S,j as w,n as re,f as a,m as M,g as O,c as J,x as ue,r as C,w as te,q as D,e as _e,C as Fe,k as de,D as Ie,B as we}from"./vue.esm-bundler-DAoQZYEK.js";import{u as Ee,a as ce}from"./useForwardPropsEmits-CKR2vMz0.js";import{a as fe}from"./utils-oDltpQaF.js";import{r as me}from"./index-Ds8CDDS1.js";import{_ as Se,a as Ve}from"./PopperAnchor-DaTLS6Yh.js";import{b as pe,u as oe,f as Y}from"./useForwardExpose-D9aka3cn.js";import{P as le}from"./Primitive-Dw578XAm.js";import{c as he}from"./createContext-Ddb9PwdX.js";import{u as ge}from"./usePrimitiveElement-BMNSglW7.js";import{u as ve}from"./useDirection-CPl_s7F5.js";import{u as ke}from"./Collection-DofB2lS5.js";import{i as ae}from"./ohash.D__AXeF1-DHF4M4F_.js";import{g as Te}from"./utils-CC-pqV_U.js";import{u as Oe}from"./useTypeahead-CduMtySe.js";import{u as $e}from"./useFormControl-D_hDJxiF.js";import{_ as Ke}from"./VisuallyHiddenInput-Bg8Cl6IS.js";import{u as Ne}from"./useKbd-kRIii9yh.js";const Ae=T({__name:"ComboboxAnchor",props:{reference:{},asChild:{type:Boolean},as:{}},setup(s){const{forwardRef:r}=pe();return(u,t)=>(S(),E(a(Se),{"as-child":"",reference:u.reference},{default:w(()=>[re(a(le),M({ref:a(r),"as-child":u.asChild,as:u.as},u.$attrs),{default:w(()=>[O(u.$slots,"default")]),_:3},16,["as-child","as"])]),_:3},8,["reference"]))}});function Re(s){const r=J(()=>a(s)),u=J(()=>new Intl.Collator("en",{usage:"search",...r.value}));return{startsWith:(f,n)=>n.length===0?!0:(f=f.normalize("NFC"),n=n.normalize("NFC"),u.value.compare(f.slice(0,n.length),n)===0),endsWith:(f,n)=>n.length===0?!0:(f=f.normalize("NFC"),n=n.normalize("NFC"),u.value.compare(f.slice(-n.length),n)===0),contains:(f,n)=>{if(n.length===0)return!0;f=f.normalize("NFC"),n=n.normalize("NFC");let b=0;const $=n.length;for(;b+$<=f.length;b++){const z=f.slice(b,b+$);if(u.value.compare(n,z)===0)return!0}return!1}}}function ct(s,r,u){return s===void 0?!1:Array.isArray(s)?s.some(t=>G(t,r,u)):G(s,r,u)}function G(s,r,u){return s===void 0||r===void 0?!1:typeof s=="string"?s===r:typeof u=="function"?u(s,r):typeof u=="string"?(s==null?void 0:s[u])===(r==null?void 0:r[u]):ae(s,r)}function Pe(s,r,u){const t=s.findIndex(n=>ae(n,r)),d=s.findIndex(n=>ae(n,u));if(t===-1||d===-1)return[];const[c,f]=[t,d].sort((n,b)=>n-b);return s.slice(c,f+1)}const[ft,qe]=he("ListboxRoot"),He=T({__name:"ListboxRoot",props:{modelValue:{},defaultValue:{},multiple:{type:Boolean},orientation:{default:"vertical"},dir:{},disabled:{type:Boolean},selectionBehavior:{default:"toggle"},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(s,{expose:r,emit:u}){const t=s,d=u,{multiple:c,highlightOnHover:f,orientation:n,disabled:b,selectionBehavior:$,dir:z}=ue(t),{getItems:B}=ke({isProvider:!0}),{handleTypeaheadSearch:Z}=Oe(),{primitiveElement:V,currentElement:x}=ge(),Q=Ne(),K=ve(z),U=$e(x),k=C(),_=C(!1),N=C(!0),h=oe(t,"modelValue",d,{defaultValue:t.defaultValue??(c.value?[]:void 0),passive:t.modelValue===void 0,deep:!0});function A(e){if(_.value=!0,t.multiple){const o=Array.isArray(h.value)?[...h.value]:[],l=o.findIndex(p=>G(p,e,t.by));t.selectionBehavior==="toggle"?(l===-1?o.push(e):o.splice(l,1),h.value=o):(h.value=[e],k.value=e)}else t.selectionBehavior==="toggle"&&G(h.value,e,t.by)?h.value=void 0:h.value=e;setTimeout(()=>{_.value=!1},1)}const g=C(null),j=C(null),m=C(!1),R=C(!1),F=Y(),P=Y(),L=Y();function q(){return B().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function i(e,o=!0){if(!e)return;g.value=e,N.value&&g.value.focus(),o&&g.value.scrollIntoView({block:"nearest"});const l=B().find(p=>p.ref===e);d("highlight",l)}function v(e){if(m.value)L.trigger(e);else{const o=B().find(l=>G(l.value,e,t.by));o&&(g.value=o.ref,i(o.ref))}}function y(e){g.value&&g.value.isConnected&&(e.preventDefault(),e.stopPropagation(),R.value||g.value.click())}function H(e){if(N.value){if(_.value=!0,m.value)P.trigger(e);else{const o=e.altKey||e.ctrlKey||e.metaKey;if(o&&e.key==="a"&&c.value){const l=B(),p=l.map(I=>I.value);h.value=[...p],e.preventDefault(),i(l[l.length-1].ref)}else if(!o){const l=Z(e.key,B());l&&i(l)}}setTimeout(()=>{_.value=!1},1)}}function ye(){R.value=!0}function be(){requestAnimationFrame(()=>{R.value=!1})}function ne(){D(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ie(e)})}function ee(e){const o=g.value;o!=null&&o.isConnected&&(j.value=o),g.value=null,d("leave",e)}function Ce(e){var l,p;const o=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((l=e.currentTarget)==null||l.dispatchEvent(o),d("entryFocus",o),!o.defaultPrevented)if(j.value)i(j.value);else{const I=(p=q())==null?void 0:p[0];i(I)}}function ie(e){const o=Te(e,n.value,K.value);if(!o)return;let l=q();if(g.value){if(o==="last")l.reverse();else if(o==="prev"||o==="next"){o==="prev"&&l.reverse();const p=l.indexOf(g.value);l=l.slice(p+1)}xe(e,l[0])}if(l.length){const p=!g.value&&o==="prev"?l.length-1:0;i(l[p])}if(m.value)return P.trigger(e)}function xe(e,o){var p;if(!(m.value||t.selectionBehavior!=="replace"||!c.value||!Array.isArray(h.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const I=B().filter(W=>W.ref.dataset.disabled!=="");let X=(p=I.find(W=>W.ref===o))==null?void 0:p.value;if(e.key===Q.END?X=I[I.length-1].value:e.key===Q.HOME&&(X=I[0].value),!X||!k.value)return;const Be=Pe(I.map(W=>W.value),k.value,X);h.value=Be}}async function se(e){if(await D(),m.value)F.trigger(e);else{const o=q(),l=o.find(p=>p.dataset.state==="checked");l?i(l):o.length&&i(o[0])}}return te(h,()=>{_.value||D(()=>{se()})},{immediate:!0,deep:!0}),r({highlightedElement:g,highlightItem:v,highlightFirstItem:ne,highlightSelected:se,getItems:B}),qe({modelValue:h,onValueChange:A,multiple:c,orientation:n,dir:K,disabled:b,highlightOnHover:f,highlightedElement:g,isVirtual:m,virtualFocusHook:F,virtualKeydownHook:P,virtualHighlightHook:L,by:t.by,firstValue:k,selectionBehavior:$,focusable:N,onLeave:ee,onEnter:Ce,changeHighlight:i,onKeydownEnter:y,onKeydownNavigation:ie,onKeydownTypeAhead:H,onCompositionStart:ye,onCompositionEnd:be,highlightFirstItem:ne}),(e,o)=>(S(),E(a(le),{ref_key:"primitiveElement",ref:V,as:e.as,"as-child":e.asChild,dir:a(K),"data-disabled":a(b)?"":void 0,onPointerleave:ee,onFocusout:o[0]||(o[0]=async l=>{const p=l.relatedTarget||l.target;await D(),g.value&&a(x)&&!a(x).contains(p)&&ee(l)})},{default:w(()=>[O(e.$slots,"default",{modelValue:a(h)}),a(U)&&e.name?(S(),E(a(Ke),{key:0,name:e.name,value:a(h),disabled:a(b),required:e.required},null,8,["name","value","disabled","required"])):_e("",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),[De,Me]=he("ComboboxRoot"),ze=T({__name:"ComboboxRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean},resetSearchTermOnBlur:{type:Boolean,default:!0},resetSearchTermOnSelect:{type:Boolean,default:!0},ignoreFilter:{type:Boolean},modelValue:{},defaultValue:{},multiple:{type:Boolean},dir:{},disabled:{type:Boolean},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","update:open"],setup(s,{expose:r,emit:u}){var P,L,q;const t=s,d=u,{primitiveElement:c,currentElement:f}=ge(),{multiple:n,disabled:b,ignoreFilter:$,resetSearchTermOnSelect:z,dir:B}=ue(t),Z=ve(B),V=oe(t,"modelValue",d,{defaultValue:t.defaultValue??(n.value?[]:void 0),passive:t.modelValue===void 0,deep:!0}),x=oe(t,"open",d,{defaultValue:t.defaultOpen,passive:t.open===void 0});async function Q(i){var v,y;x.value=i,m.search="",i?(await D(),(v=c.value)==null||v.highlightSelected(),U.value=!0):U.value=!1,(y=_.value)==null||y.focus(),setTimeout(()=>{!i&&t.resetSearchTermOnBlur&&K.trigger()},1)}const K=Y(),U=C(!1),k=C(!1),_=C(),N=C(),h=J(()=>{var i;return((i=c.value)==null?void 0:i.highlightedElement)??void 0}),A=C(new Map),g=C(new Map),{contains:j}=Re({sensitivity:"base"}),m=Fe({search:"",filtered:{count:0,items:new Map,groups:new Set}});function R(){if(!m.search||t.ignoreFilter||k.value){m.filtered.count=A.value.size;return}m.filtered.groups=new Set;let i=0;for(const[v,y]of A.value){const H=j(y,m.search);m.filtered.items.set(v,H?1:0),H&&i++}for(const[v,y]of g.value)for(const H of y)if(m.filtered.items.get(H)>0){m.filtered.groups.add(v);break}m.filtered.count=i}te([()=>m.search,()=>A.value.size],()=>{R()},{immediate:!0}),te(()=>x.value,()=>{D(()=>{x.value&&R()})},{flush:"post"});const F=Ie();return de(()=>{var i,v,y;F!=null&&F.exposed&&(F.exposed.highlightItem=(i=c.value)==null?void 0:i.highlightItem,F.exposed.highlightFirstItem=(v=c.value)==null?void 0:v.highlightFirstItem,F.exposed.highlightSelected=(y=c.value)==null?void 0:y.highlightSelected)}),r({filtered:J(()=>m.filtered),highlightedElement:h,highlightItem:(P=c.value)==null?void 0:P.highlightItem,highlightFirstItem:(L=c.value)==null?void 0:L.highlightFirstItem,highlightSelected:(q=c.value)==null?void 0:q.highlightSelected}),Me({modelValue:V,multiple:n,disabled:b,open:x,onOpenChange:Q,contentId:"",isUserInputted:U,isVirtual:k,inputElement:_,highlightedElement:h,onInputElementChange:i=>_.value=i,triggerElement:N,onTriggerElementChange:i=>N.value=i,parentElement:f,resetSearchTermOnSelect:z,onResetSearchTerm:K.on,allItems:A,allGroups:g,filterState:m,ignoreFilter:$}),(i,v)=>(S(),E(a(Ve),null,{default:w(()=>[re(a(He),M({ref_key:"primitiveElement",ref:c},i.$attrs,{modelValue:a(V),"onUpdate:modelValue":v[0]||(v[0]=y=>we(V)?V.value=y:null),style:{pointerEvents:a(x)?"auto":void 0},as:i.as,"as-child":i.asChild,dir:a(Z),multiple:a(n),name:i.name,required:i.required,disabled:a(b),"highlight-on-hover":!0,by:t.by,onHighlight:v[1]||(v[1]=y=>d("highlight",y))}),{default:w(()=>[O(i.$slots,"default",{open:a(x),modelValue:a(V)})]),_:3},16,["modelValue","style","as","as-child","dir","multiple","name","required","disabled","by"])]),_:3}))}}),Ue=T({__name:"ComboboxTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(s){const r=s,{forwardRef:u,currentElement:t}=pe(),d=De(),c=J(()=>r.disabled||d.disabled.value||!1);return de(()=>{t.value&&d.onTriggerElementChange(t.value)}),(f,n)=>(S(),E(a(le),M(r,{ref:a(u),type:f.as==="button"?"button":void 0,tabindex:"-1","aria-label":"Show popup","aria-haspopup":"listbox","aria-expanded":a(d).open.value,"aria-controls":a(d).contentId,"data-state":a(d).open.value?"open":"closed",disabled:c.value,"data-disabled":c.value?"":void 0,"aria-disabled":c.value??void 0,onClick:n[0]||(n[0]=b=>a(d).onOpenChange(!a(d).open.value))}),{default:w(()=>[O(f.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","disabled","data-disabled","aria-disabled"]))}}),je=T({__name:"Combobox",props:{open:{type:Boolean},defaultOpen:{type:Boolean},resetSearchTermOnBlur:{type:Boolean},resetSearchTermOnSelect:{type:Boolean},ignoreFilter:{type:Boolean},modelValue:{},defaultValue:{},multiple:{type:Boolean},dir:{},disabled:{type:Boolean},highlightOnHover:{type:Boolean},by:{type:[String,Function]},asChild:{type:Boolean},as:{type:[String,Object,Function]},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","update:open"],setup(s,{emit:r}){const d=Ee(s,r);return(c,f)=>(S(),E(a(ze),M({"data-slot":"combobox"},a(d),{class:"relative w-full"}),{default:w(()=>[O(c.$slots,"default")]),_:3},16))}});je.__docgenInfo={exportName:"default",displayName:"Combobox",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/lord/Documents/asd/gwind-vue/src/components/combobox/Combobox.vue"]};const Le=T({__name:"ComboboxAnchor",props:{reference:{},asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(s){const r=s,u=me(r,"class"),t=ce(u);return(d,c)=>(S(),E(a(Ae),M({"data-slot":"combobox-anchor"},a(t),{class:a(fe)("w-full",r.class)}),{default:w(()=>[O(d.$slots,"default")]),_:3},16,["class"]))}});Le.__docgenInfo={exportName:"default",displayName:"ComboboxAnchor",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/lord/Documents/asd/gwind-vue/src/components/combobox/ComboboxAnchor.vue"]};const We=T({__name:"ComboboxTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{type:[String,Object,Function]},class:{}},setup(s){const r=s,u=me(r,"class"),t=ce(u);return(d,c)=>(S(),E(a(Ue),M({"data-slot":"combobox-trigger"},a(t),{class:a(fe)("",r.class),tabindex:"0"}),{default:w(()=>[O(d.$slots,"default")]),_:3},16,["class"]))}});We.__docgenInfo={exportName:"default",displayName:"ComboboxTrigger",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/lord/Documents/asd/gwind-vue/src/components/combobox/ComboboxTrigger.vue"]};export{Le as _,We as a,je as b,De as c,ft as i,ct as v};
