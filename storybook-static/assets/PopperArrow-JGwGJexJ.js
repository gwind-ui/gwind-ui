import{r as q,s as x,d as b,b as B,o as d,j as _,g as A,I as g,m as C,f as h,c as E,n as P,G as S}from"./vue.esm-bundler-CDO2oHXK.js";import{r as T,f as R,b as k}from"./useForwardExpose-BfXw-hnz.js";import{P as G}from"./Primitive-BG2Gt-GN.js";import{i as M}from"./PopperContent-I7GIJaXt.js";function W(t,r){const e=T(!1,300),o=q(null),a=R();function l(){o.value=null,e.value=!1}function n(i,u){const c=i.currentTarget,s={x:i.clientX,y:i.clientY},f=H(s,c.getBoundingClientRect()),p=Y(s,f),v=X(u.getBoundingClientRect()),y=I([...p,...v]);o.value=y,e.value=!0}return x(i=>{if(t.value&&r.value){const u=s=>n(s,r.value),c=s=>n(s,t.value);t.value.addEventListener("pointerleave",u),r.value.addEventListener("pointerleave",c),i(()=>{var s,f;(s=t.value)==null||s.removeEventListener("pointerleave",u),(f=r.value)==null||f.removeEventListener("pointerleave",c)})}}),x(i=>{var u;if(o.value){const c=s=>{var w,m;if(!o.value||!(s.target instanceof HTMLElement))return;const f=s.target,p={x:s.clientX,y:s.clientY},v=((w=t.value)==null?void 0:w.contains(f))||((m=r.value)==null?void 0:m.contains(f)),y=!j(p,o.value),L=!!f.closest("[data-grace-area-trigger]");v?l():(y||L)&&(l(),a.trigger())};(u=t.value)==null||u.ownerDocument.addEventListener("pointermove",c),i(()=>{var s;return(s=t.value)==null?void 0:s.ownerDocument.removeEventListener("pointermove",c)})}}),{isPointerInTransit:e,onPointerExit:a.on}}function H(t,r){const e=Math.abs(r.top-t.y),o=Math.abs(r.bottom-t.y),a=Math.abs(r.right-t.x),l=Math.abs(r.left-t.x);switch(Math.min(e,o,a,l)){case l:return"left";case a:return"right";case e:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function Y(t,r,e=5){const o=[];switch(r){case"top":o.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":o.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":o.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":o.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return o}function X(t){const{top:r,right:e,bottom:o,left:a}=t;return[{x:a,y:r},{x:e,y:r},{x:e,y:o},{x:a,y:o}]}function j(t,r){const{x:e,y:o}=t;let a=!1;for(let l=0,n=r.length-1;l<r.length;n=l++){const i=r[l].x,u=r[l].y,c=r[n].x,s=r[n].y;u>o!=s>o&&e<(c-i)*(o-u)/(s-u)+i&&(a=!a)}return a}function I(t){const r=t.slice();return r.sort((e,o)=>e.x<o.x?-1:e.x>o.x?1:e.y<o.y?-1:e.y>o.y?1:0),N(r)}function N(t){if(t.length<=1)return t.slice();const r=[];for(let o=0;o<t.length;o++){const a=t[o];for(;r.length>=2;){const l=r[r.length-1],n=r[r.length-2];if((l.x-n.x)*(a.y-n.y)>=(l.y-n.y)*(a.x-n.x))r.pop();else break}r.push(a)}r.pop();const e=[];for(let o=t.length-1;o>=0;o--){const a=t[o];for(;e.length>=2;){const l=e[e.length-1],n=e[e.length-2];if((l.x-n.x)*(a.y-n.y)>=(l.y-n.y)*(a.x-n.x))e.pop();else break}e.push(a)}return e.pop(),r.length===1&&e.length===1&&r[0].x===e[0].x&&r[0].y===e[0].y?r:r.concat(e)}const $={key:0,d:"M0 0L6 6L12 0"},O={key:1,d:"M0 0L4.58579 4.58579C5.36683 5.36683 6.63316 5.36684 7.41421 4.58579L12 0"};var D=b({__name:"Arrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(t){const r=t;return k(),(e,o)=>(d(),B(h(G),C(r,{width:e.width,height:e.height,viewBox:e.asChild?void 0:"0 0 12 6",preserveAspectRatio:e.asChild?void 0:"none"}),{default:_(()=>[A(e.$slots,"default",{},()=>[e.rounded?(d(),g("path",O)):(d(),g("path",$))])]),_:3},16,["width","height","viewBox","preserveAspectRatio"]))}}),F=D;const z={top:"bottom",right:"left",bottom:"top",left:"right"};var V=b({inheritAttrs:!1,__name:"PopperArrow",props:{width:{type:Number,required:!1},height:{type:Number,required:!1},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(t){const{forwardRef:r}=k(),e=M(),o=E(()=>z[e.placedSide.value]);return(a,l)=>{var n,i,u,c;return d(),g("span",{ref:s=>{h(e).onArrowChange(s)},style:S({position:"absolute",left:(n=h(e).arrowX)!=null&&n.value?`${(i=h(e).arrowX)==null?void 0:i.value}px`:void 0,top:(u=h(e).arrowY)!=null&&u.value?`${(c=h(e).arrowY)==null?void 0:c.value}px`:void 0,[o.value]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[h(e).placedSide.value],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[h(e).placedSide.value],visibility:h(e).shouldHideArrow.value?"hidden":void 0})},[P(F,C(a.$attrs,{ref:h(r),style:{display:"block"},as:a.as,"as-child":a.asChild,rounded:a.rounded,width:a.width,height:a.height}),{default:_(()=>[A(a.$slots,"default")]),_:3},16,["as","as-child","rounded","width","height"])],4)}}}),Z=V;export{Z as P,W as u};
