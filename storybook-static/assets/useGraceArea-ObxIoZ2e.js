import{d as b,b as E,o as d,j as A,g as C,J as g,m as k,f as h,c as S,n as T,H as R,r as _,s as w}from"./vue.esm-bundler-DAoQZYEK.js";import{b as L,r as H,f as M}from"./useForwardExpose-D9aka3cn.js";import{P}from"./Primitive-Dw578XAm.js";import{i as G}from"./PopperContent-B7F8Xzj1.js";const Y={key:0,d:"M0 0L6 6L12 0"},X={key:1,d:"M0 0L4.58579 4.58579C5.36683 5.36683 6.63316 5.36684 7.41421 4.58579L12 0"},$=b({__name:"Arrow",props:{width:{default:10},height:{default:5},rounded:{type:Boolean},asChild:{type:Boolean},as:{default:"svg"}},setup(t){const r=t;return L(),(e,o)=>(d(),E(h(P),k(r,{width:e.width,height:e.height,viewBox:e.asChild?void 0:"0 0 12 6",preserveAspectRatio:e.asChild?void 0:"none"}),{default:A(()=>[C(e.$slots,"default",{},()=>[e.rounded?(d(),g("path",X)):(d(),g("path",Y))])]),_:3},16,["width","height","viewBox","preserveAspectRatio"]))}}),j={top:"bottom",right:"left",bottom:"top",left:"right"},Q=b({inheritAttrs:!1,__name:"PopperArrow",props:{width:{},height:{},rounded:{type:Boolean},asChild:{type:Boolean},as:{default:"svg"}},setup(t){const{forwardRef:r}=L(),e=G(),o=S(()=>j[e.placedSide.value]);return(s,l)=>{var n,c,i,u;return d(),g("span",{ref:a=>{h(e).onArrowChange(a)},style:R({position:"absolute",left:(n=h(e).arrowX)!=null&&n.value?`${(c=h(e).arrowX)==null?void 0:c.value}px`:void 0,top:(i=h(e).arrowY)!=null&&i.value?`${(u=h(e).arrowY)==null?void 0:u.value}px`:void 0,[o.value]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[h(e).placedSide.value],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[h(e).placedSide.value],visibility:h(e).shouldHideArrow.value?"hidden":void 0})},[T($,k(s.$attrs,{ref:h(r),style:{display:"block"},as:s.as,"as-child":s.asChild,rounded:s.rounded,width:s.width,height:s.height}),{default:A(()=>[C(s.$slots,"default")]),_:3},16,["as","as-child","rounded","width","height"])],4)}}});function U(t,r){const e=H(!1,300),o=_(null),s=M();function l(){o.value=null,e.value=!1}function n(c,i){const u=c.currentTarget,a={x:c.clientX,y:c.clientY},f=I(a,u.getBoundingClientRect()),v=O(a,f),p=D(i.getBoundingClientRect()),y=q([...v,...p]);o.value=y,e.value=!0}return w(c=>{if(t.value&&r.value){const i=a=>n(a,r.value),u=a=>n(a,t.value);t.value.addEventListener("pointerleave",i),r.value.addEventListener("pointerleave",u),c(()=>{var a,f;(a=t.value)==null||a.removeEventListener("pointerleave",i),(f=r.value)==null||f.removeEventListener("pointerleave",u)})}}),w(c=>{var i;if(o.value){const u=a=>{var x,m;if(!o.value||!(a.target instanceof HTMLElement))return;const f=a.target,v={x:a.clientX,y:a.clientY},p=((x=t.value)==null?void 0:x.contains(f))||((m=r.value)==null?void 0:m.contains(f)),y=!F(v,o.value),B=!!f.closest("[data-grace-area-trigger]");p?l():(y||B)&&(l(),s.trigger())};(i=t.value)==null||i.ownerDocument.addEventListener("pointermove",u),c(()=>{var a;return(a=t.value)==null?void 0:a.ownerDocument.removeEventListener("pointermove",u)})}}),{isPointerInTransit:e,onPointerExit:s.on}}function I(t,r){const e=Math.abs(r.top-t.y),o=Math.abs(r.bottom-t.y),s=Math.abs(r.right-t.x),l=Math.abs(r.left-t.x);switch(Math.min(e,o,s,l)){case l:return"left";case s:return"right";case e:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function O(t,r,e=5){const o=[];switch(r){case"top":o.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":o.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":o.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":o.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return o}function D(t){const{top:r,right:e,bottom:o,left:s}=t;return[{x:s,y:r},{x:e,y:r},{x:e,y:o},{x:s,y:o}]}function F(t,r){const{x:e,y:o}=t;let s=!1;for(let l=0,n=r.length-1;l<r.length;n=l++){const c=r[l].x,i=r[l].y,u=r[n].x,a=r[n].y;i>o!=a>o&&e<(u-c)*(o-i)/(a-i)+c&&(s=!s)}return s}function q(t){const r=t.slice();return r.sort((e,o)=>e.x<o.x?-1:e.x>o.x?1:e.y<o.y?-1:e.y>o.y?1:0),z(r)}function z(t){if(t.length<=1)return t.slice();const r=[];for(let o=0;o<t.length;o++){const s=t[o];for(;r.length>=2;){const l=r[r.length-1],n=r[r.length-2];if((l.x-n.x)*(s.y-n.y)>=(l.y-n.y)*(s.x-n.x))r.pop();else break}r.push(s)}r.pop();const e=[];for(let o=t.length-1;o>=0;o--){const s=t[o];for(;e.length>=2;){const l=e[e.length-1],n=e[e.length-2];if((l.x-n.x)*(s.y-n.y)>=(l.y-n.y)*(s.x-n.x))e.pop();else break}e.push(s)}return e.pop(),r.length===1&&e.length===1&&r[0].x===e[0].x&&r[0].y===e[0].y?r:r.concat(e)}export{Q as _,U as u};
