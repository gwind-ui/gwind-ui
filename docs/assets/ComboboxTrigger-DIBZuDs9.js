import{c as Q,f as a,d as A,b as E,o as k,j as I,n as de,m as z,g as K,v as ce,r as b,w as xe,q as L,e as qe,k as fe,C as Be,A as Fe}from"./vue.esm-bundler-CDO2oHXK.js";import{u as Ie,a as pe}from"./useForwardPropsEmits-CrpZhFqP.js";import{b as me,u as re,f as te}from"./useForwardExpose-BfXw-hnz.js";import{P as ie}from"./Primitive-BG2Gt-GN.js";import{P as we,a as Se}from"./PopperAnchor-ul6QnmqM.js";import{a as he}from"./utils-N9jxOpu3.js";import{r as ge}from"./index-BoSxBLVn.js";import{c as ve}from"./createContext-B-1E407x.js";import{u as ye}from"./useDirection-Cqhzq67l.js";import{u as be}from"./usePrimitiveElement-DwTCBgzO.js";import{i as ne}from"./ohash.D__AXeF1-Cq3NGnZa.js";import{u as Ee}from"./useFormControl-BLoef7eD.js";import{u as ke}from"./useKbd-kRIii9yh.js";import{u as Oe}from"./useTypeahead-BAS9tIyA.js";import{u as Te}from"./Collection-Og8eIrJl.js";import{g as Re}from"./utils-CC-pqV_U.js";import{V as Ve}from"./VisuallyHiddenInput-DQJWHtI9.js";function Ae(n,i,s){const t=n.findIndex(r=>ne(r,i)),d=n.findIndex(r=>ne(r,s));if(t===-1||d===-1)return[];const[c,f]=[t,d].sort((r,y)=>r-y);return n.slice(c,f+1)}function Ke(n){const i=Q(()=>a(n)),s=Q(()=>new Intl.Collator("en",{usage:"search",...i.value}));return{startsWith:(f,r)=>r.length===0?!0:(f=f.normalize("NFC"),r=r.normalize("NFC"),s.value.compare(f.slice(0,r.length),r)===0),endsWith:(f,r)=>r.length===0?!0:(f=f.normalize("NFC"),r=r.normalize("NFC"),s.value.compare(f.slice(-r.length),r)===0),contains:(f,r)=>{if(r.length===0)return!0;f=f.normalize("NFC"),r=r.normalize("NFC");let y=0;const N=r.length;for(;y+N<=f.length;y++){const U=f.slice(y,y+N);if(s.value.compare(r,U)===0)return!0}return!1}}}var Ne=A({__name:"ComboboxAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const{forwardRef:i}=me();return(s,t)=>(k(),E(a(we),{"as-child":"",reference:s.reference},{default:I(()=>[de(a(ie),z({ref:a(i),"as-child":s.asChild,as:s.as},s.$attrs),{default:I(()=>[K(s.$slots,"default")]),_:3},16,["as-child","as"])]),_:3},8,["reference"]))}}),Pe=Ne;function mt(n,i,s){return n===void 0?!1:Array.isArray(n)?n.some(t=>J(t,i,s)):J(n,i,s)}function J(n,i,s){return n===void 0||i===void 0?!1:typeof n=="string"?n===i:typeof s=="function"?s(n,i):typeof s=="string"?(n==null?void 0:n[s])===(i==null?void 0:i[s]):ne(n,i)}const[ht,He]=ve("ListboxRoot");var $e=A({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:i,emit:s}){const t=n,d=s,{multiple:c,highlightOnHover:f,orientation:r,disabled:y,selectionBehavior:N,dir:U}=ce(t),{getItems:x}=Te({isProvider:!0}),{handleTypeaheadSearch:oe}=Oe(),{primitiveElement:ae,currentElement:W}=be(),w=ke(),S=ye(U),le=Ee(W),O=b(),q=b(!1),P=b(!0),p=re(t,"modelValue",d,{defaultValue:t.defaultValue??(c.value?[]:void 0),passive:t.modelValue===void 0,deep:!0});function X(e){if(q.value=!0,t.multiple){const o=Array.isArray(p.value)?[...p.value]:[],l=o.findIndex(m=>J(m,e,t.by));t.selectionBehavior==="toggle"?(l===-1?o.push(e):o.splice(l,1),p.value=o):(p.value=[e],O.value=e)}else t.selectionBehavior==="toggle"&&J(p.value,e,t.by)?p.value=void 0:p.value=e;setTimeout(()=>{q.value=!1},1)}const h=b(null),T=b(null),_=b(!1),j=b(!1),R=te(),H=te(),B=te();function $(){return x().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function C(e,o=!0){if(!e)return;h.value=e,P.value&&h.value.focus(),o&&h.value.scrollIntoView({block:"nearest"});const l=x().find(m=>m.ref===e);d("highlight",l)}function Y(e){if(_.value)B.trigger(e);else{const o=x().find(l=>J(l.value,e,t.by));o&&(h.value=o.ref,C(o.ref))}}function u(e){h.value&&h.value.isConnected&&(e.preventDefault(),e.stopPropagation(),j.value||h.value.click())}function g(e){if(P.value){if(q.value=!0,_.value)H.trigger(e);else{const o=e.altKey||e.ctrlKey||e.metaKey;if(o&&e.key==="a"&&c.value){const l=x(),m=l.map(F=>F.value);p.value=[...m],e.preventDefault(),C(l[l.length-1].ref)}else if(!o){const l=oe(e.key,x());l&&C(l)}}setTimeout(()=>{q.value=!1},1)}}function v(){j.value=!0}function Z(){L(()=>{j.value=!1})}function M(){L(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});se(e)})}function V(e){const o=h.value;o!=null&&o.isConnected&&(T.value=o),h.value=null,d("leave",e)}function D(e){var l,m;const o=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((l=e.currentTarget)==null||l.dispatchEvent(o),d("entryFocus",o),!o.defaultPrevented)if(T.value)C(T.value);else{const F=(m=$())==null?void 0:m[0];C(F)}}function se(e){const o=Re(e,r.value,S.value);if(!o)return;let l=$();if(h.value){if(o==="last")l.reverse();else if(o==="prev"||o==="next"){o==="prev"&&l.reverse();const m=l.indexOf(h.value);l=l.slice(m+1)}Ce(e,l[0])}if(l.length){const m=!h.value&&o==="prev"?l.length-1:0;C(l[m])}if(_.value)return H.trigger(e)}function Ce(e,o){var m;if(!(_.value||t.selectionBehavior!=="replace"||!c.value||!Array.isArray(p.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const F=x().filter(G=>G.ref.dataset.disabled!=="");let ee=(m=F.find(G=>G.ref===o))==null?void 0:m.value;if(e.key===w.END?ee=F[F.length-1].value:e.key===w.HOME&&(ee=F[0].value),!ee||!O.value)return;const _e=Ae(F.map(G=>G.value),O.value,ee);p.value=_e}}async function ue(e){if(await L(),_.value)R.trigger(e);else{const o=$(),l=o.find(m=>m.dataset.state==="checked");l?C(l):o.length&&C(o[0])}}return xe(p,()=>{q.value||L(()=>{ue()})},{immediate:!0,deep:!0}),i({highlightedElement:h,highlightItem:Y,highlightFirstItem:M,highlightSelected:ue,getItems:x}),He({modelValue:p,onValueChange:X,multiple:c,orientation:r,dir:S,disabled:y,highlightOnHover:f,highlightedElement:h,isVirtual:_,virtualFocusHook:R,virtualKeydownHook:H,virtualHighlightHook:B,by:t.by,firstValue:O,selectionBehavior:N,focusable:P,onLeave:V,onEnter:D,changeHighlight:C,onKeydownEnter:u,onKeydownNavigation:se,onKeydownTypeAhead:g,onCompositionStart:v,onCompositionEnd:Z,highlightFirstItem:M}),(e,o)=>(k(),E(a(ie),{ref_key:"primitiveElement",ref:ae,as:e.as,"as-child":e.asChild,dir:a(S),"data-disabled":a(y)?"":void 0,onPointerleave:V,onFocusout:o[0]||(o[0]=async l=>{const m=l.relatedTarget||l.target;await L(),h.value&&a(W)&&!a(W).contains(m)&&V(l)})},{default:I(()=>[K(e.$slots,"default",{modelValue:a(p)}),a(le)&&e.name?(k(),E(a(Ve),{key:0,name:e.name,value:a(p),disabled:a(y),required:e.required},null,8,["name","value","disabled","required"])):qe("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),Me=$e;const[De,Le]=ve("ComboboxRoot");var ze=A({__name:"ComboboxRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1},resetSearchTermOnBlur:{type:Boolean,required:!1,default:!0},resetSearchTermOnSelect:{type:Boolean,required:!1,default:!0},openOnFocus:{type:Boolean,required:!1,default:!1},openOnClick:{type:Boolean,required:!1,default:!1},ignoreFilter:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","update:open"],setup(n,{expose:i,emit:s}){var $,C,Y;const t=n,d=s,{primitiveElement:c,currentElement:f}=be(),{multiple:r,disabled:y,ignoreFilter:N,resetSearchTermOnSelect:U,openOnFocus:x,openOnClick:oe,dir:ae}=ce(t),W=ye(ae),w=re(t,"modelValue",d,{defaultValue:t.defaultValue??(r.value?[]:void 0),passive:t.modelValue===void 0,deep:!0}),S=re(t,"open",d,{defaultValue:t.defaultOpen,passive:t.open===void 0});async function le(u){var g,v;S.value=u,R.value="",u?(await L(),(g=c.value)==null||g.highlightSelected(),q.value=!0):q.value=!1,(v=p.value)==null||v.focus(),setTimeout(()=>{!u&&t.resetSearchTermOnBlur&&O.trigger()},1)}const O=te(),q=b(!1),P=b(!1),p=b(),X=b(),h=Q(()=>{var u;return((u=c.value)==null?void 0:u.highlightedElement)??void 0}),T=b(new Map),_=b(new Map),{contains:j}=Ke({sensitivity:"base"}),R=b(""),H=Q(u=>{if(!R.value||t.ignoreFilter||P.value)return{count:T.value.size,items:(u==null?void 0:u.items)??new Map,groups:(u==null?void 0:u.groups)??new Set(_.value.keys())};let g=0;const v=new Map,Z=new Set;for(const[M,V]of T.value){const D=j(V,R.value);v.set(M,D?1:0),D&&g++}for(const[M,V]of _.value)for(const D of V)if(v.get(D)>0){Z.add(M);break}return{count:g,items:v,groups:Z}}),B=Be();return fe(()=>{var u,g,v;B!=null&&B.exposed&&(B.exposed.highlightItem=(u=c.value)==null?void 0:u.highlightItem,B.exposed.highlightFirstItem=(g=c.value)==null?void 0:g.highlightFirstItem,B.exposed.highlightSelected=(v=c.value)==null?void 0:v.highlightSelected)}),i({filtered:H,highlightedElement:h,highlightItem:($=c.value)==null?void 0:$.highlightItem,highlightFirstItem:(C=c.value)==null?void 0:C.highlightFirstItem,highlightSelected:(Y=c.value)==null?void 0:Y.highlightSelected}),Le({modelValue:w,multiple:r,disabled:y,open:S,onOpenChange:le,contentId:"",isUserInputted:q,isVirtual:P,inputElement:p,highlightedElement:h,onInputElementChange:u=>p.value=u,triggerElement:X,onTriggerElementChange:u=>X.value=u,parentElement:f,resetSearchTermOnSelect:U,onResetSearchTerm:O.on,allItems:T,allGroups:_,filterSearch:R,filterState:H,ignoreFilter:N,openOnFocus:x,openOnClick:oe}),(u,g)=>(k(),E(a(Se),null,{default:I(()=>[de(a(Me),z({ref_key:"primitiveElement",ref:c},u.$attrs,{modelValue:a(w),"onUpdate:modelValue":g[0]||(g[0]=v=>Fe(w)?w.value=v:null),style:{pointerEvents:a(S)?"auto":void 0},as:u.as,"as-child":u.asChild,dir:a(W),multiple:a(r),name:u.name,required:u.required,disabled:a(y),"highlight-on-hover":!0,by:t.by,onHighlight:g[1]||(g[1]=v=>d("highlight",v))}),{default:I(()=>[K(u.$slots,"default",{open:a(S),modelValue:a(w)})]),_:3},16,["modelValue","style","as","as-child","dir","multiple","name","required","disabled","by"])]),_:3}))}}),Ue=ze,We=A({__name:"ComboboxTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(n){const i=n,{forwardRef:s,currentElement:t}=me(),d=De(),c=Q(()=>i.disabled||d.disabled.value||!1);return fe(()=>{t.value&&d.onTriggerElementChange(t.value)}),(f,r)=>(k(),E(a(ie),z(i,{ref:a(s),type:f.as==="button"?"button":void 0,tabindex:"-1","aria-label":"Show popup","aria-haspopup":"listbox","aria-expanded":a(d).open.value,"aria-controls":a(d).contentId,"data-state":a(d).open.value?"open":"closed",disabled:c.value,"data-disabled":c.value?"":void 0,"aria-disabled":c.value??void 0,onClick:r[0]||(r[0]=y=>a(d).onOpenChange(!a(d).open.value))}),{default:I(()=>[K(f.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","disabled","data-disabled","aria-disabled"]))}}),je=We;const Ge=A({__name:"Combobox",props:{open:{type:Boolean},defaultOpen:{type:Boolean},resetSearchTermOnBlur:{type:Boolean},resetSearchTermOnSelect:{type:Boolean},openOnFocus:{type:Boolean},openOnClick:{type:Boolean},ignoreFilter:{type:Boolean},modelValue:{},defaultValue:{},multiple:{type:Boolean},dir:{},disabled:{type:Boolean},highlightOnHover:{type:Boolean},by:{type:[String,Function]},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","update:open"],setup(n,{emit:i}){const d=Ie(n,i);return(c,f)=>(k(),E(a(Ue),z({"data-slot":"combobox"},a(d),{class:"relative w-full"}),{default:I(()=>[K(c.$slots,"default")]),_:3},16))}});Ge.__docgenInfo={exportName:"default",displayName:"Combobox",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/lord/Documents/asd/gwind-ui/src/components/combobox/Combobox.vue"]};const Je=A({__name:"ComboboxAnchor",props:{reference:{},asChild:{type:Boolean},as:{},class:{}},setup(n){const i=n,s=ge(i,"class"),t=pe(s);return(d,c)=>(k(),E(a(Pe),z({"data-slot":"combobox-anchor"},a(t),{class:a(he)("w-full",i.class)}),{default:I(()=>[K(d.$slots,"default")]),_:3},16,["class"]))}});Je.__docgenInfo={exportName:"default",displayName:"ComboboxAnchor",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/lord/Documents/asd/gwind-ui/src/components/combobox/ComboboxAnchor.vue"]};const Qe=A({__name:"ComboboxTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const i=n,s=ge(i,"class"),t=pe(s);return(d,c)=>(k(),E(a(je),z({"data-slot":"combobox-trigger"},a(t),{class:a(he)("",i.class),tabindex:"0"}),{default:I(()=>[K(d.$slots,"default")]),_:3},16,["class"]))}});Qe.__docgenInfo={exportName:"default",displayName:"ComboboxTrigger",description:"",tags:{},slots:[{name:"default"}],sourceFiles:["/Users/lord/Documents/asd/gwind-ui/src/components/combobox/ComboboxTrigger.vue"]};export{Je as _,Qe as a,Ge as b,De as c,ht as i,mt as v};
