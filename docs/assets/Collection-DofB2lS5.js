import{r as c,a as w,c as m,d as u,s as h,t as k,h as f,w as x,p as T}from"./vue.esm-bundler-DAoQZYEK.js";import{u as v}from"./usePrimitiveElement-BMNSglW7.js";import{S as p}from"./Primitive-Dw578XAm.js";const d="data-reka-collection-item";function z(M={}){const{key:A="",isProvider:y=!1}=M,s=`${A}CollectionProvider`;let e;if(y){const o=c(new Map);e={collectionRef:c(),itemMap:o},T(s,e)}else e=w(s);const C=(o=!1)=>{const t=e.collectionRef.value;if(!t)return[];const r=Array.from(t.querySelectorAll(`[${d}]`)),l=Array.from(e.itemMap.value.values()).sort((i,n)=>r.indexOf(i.ref)-r.indexOf(n.ref));return o?l:l.filter(i=>i.ref.dataset.disabled!=="")},E=u({name:"CollectionSlot",setup(o,{slots:t}){const{primitiveElement:r,currentElement:a}=v();return x(a,()=>{e.collectionRef.value=a.value}),()=>f(p,{ref:r},t)}}),I=u({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(o,{slots:t,attrs:r}){const{primitiveElement:a,currentElement:l}=v();return h(i=>{if(l.value){const n=k(l.value);e.itemMap.value.set(n,{ref:l.value,value:o.value}),i(()=>e.itemMap.value.delete(n))}}),()=>f(p,{...r,[d]:"",ref:a},t)}}),R=m(()=>Array.from(e.itemMap.value.values())),S=m(()=>e.itemMap.value.size);return{getItems:C,reactiveItems:R,itemMapSize:S,CollectionSlot:E,CollectionItem:I}}export{z as u};
